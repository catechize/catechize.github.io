"use strict";(self.webpackChunkexternal_site=self.webpackChunkexternal_site||[]).push([[3955],{19526:function(e,s,a){var t=a(58168),n=a(81923),r=a(36049),o=a.n(r),l=a(86462),i=a(34033),u=a(74744),c=a(81726),d=a(1759),m=a(80951),p=a(98856),h=a(96161),_=a(1818),g=a(91310),f=a(29237),x=a(55576),v=a(69424),j=a(69319),b=a(66412),w=a(71083),y=a(78338),A=a.n(y),C=a(7425),N=a(89840),S=a.n(N),k=a(96540),$=a(29371),F=a(17798),E=a(2114),T=a(63314),z=a(82915),B=a(89e3),L=a(21226),Y=a(20037),I=a(98812),D=a(83272),R=a(42573),V=a(71523),M=a(25228),P=a(11905),O=a(47639),q=a(17437);w.A.defaults.withCredentials=!0;const U=(0,n.A)("a",{target:"e1xiimb61"})("display:inline-block;line-height:18px;font-weight:600;color:",z.theme.colors.contentAccent,";text-decoration:none;cursor:pointer;&:hover,&:focus{text-decoration:none;color:",z.theme.colors.contentAccentHover,";}",$.Zp," ",$.xe," ",$.yW,";"),Q=(0,n.A)("a",{target:"e1xiimb60"})("color:",z.theme.colors.contentAccent,";&:hover{text-decoration:underline;}"),W=P.L,Z=function(e){return(0,f.$s)({eventName:e,eventValue:"domain_email_signup_overlay_variant"})};var G={name:"jna5vc",styles:"background-color:#f2dede;border-color:#ebccd1;color:#a94442;border-radius:5px"},J={name:"1jjzo8x",styles:"background-color:#dff0d8;border-color:#d6e9c6;color:#3c763d;border-radius:5px"};const H=e=>{let{apiAnswer:s,showLoginModal:a,userType:t}=e;if(null===s)return null;const n="success"===s?J:G;return(0,q.jsx)(E.az,{my:3,p:3,textAlign:"center",css:n,role:"alert"},"success"===s&&(0,q.jsx)(u.EY,{fontSize:"2"},(0,q.jsx)(m.A,{path:"components.signup_teacher.success"}),(0,q.jsx)("br",null),(0,q.jsx)(m.A,{path:"components.common.redirect_now"})),"api-error"===s&&(0,q.jsx)(k.Fragment,null,(0,q.jsx)(u.EY,{fontSize:"2",display:"inline"},(0,q.jsx)(m.A,{path:"components.signup_teacher.unknown_error"}))),"email-exists-error"===s&&(0,q.jsx)(k.Fragment,null,(0,q.jsx)(u.EY,{fontSize:"2",display:"inline"},(0,q.jsx)(m.A,{path:"components.signup_teacher.already_used"})),(0,q.jsx)(U,{ml:"5px",onClick:()=>{event.preventDefault(),Z(`web.${t}.user_signup.signup_form.login.tap`),a()},display:"inline",href:"#"},(0,q.jsx)(m.A,{path:"components.signup_teacher.mean_to_login"}))),"email-error"===s&&(0,q.jsx)(k.Fragment,null,(0,q.jsx)(u.EY,{fontSize:"2",display:"inline"},(0,q.jsx)(m.A,{path:"components.signup_teacher.invalid_email"}))),"password-matches-email-error"===s&&(0,q.jsx)(k.Fragment,null,(0,q.jsx)(u.EY,{fontSize:"2",display:"inline"},(0,q.jsx)(m.A,{path:"components.signup_teacher.password_matches_email"}))),"common-password-error"===s&&(0,q.jsx)(k.Fragment,null,(0,q.jsx)(u.EY,{fontSize:"2",display:"inline"},(0,q.jsx)(m.A,{path:"components.signup_teacher.common_password"}))),"suspended-email-error"===s&&(0,q.jsx)(k.Fragment,null,(0,q.jsx)(u.EY,{fontSize:"2",display:"inline"},(0,q.jsx)(m.A,{path:"components.signup_teacher.suspended_email"}))))};function K(e,s){return Object.fromEntries(Object.entries(e).map(e=>{let[a,t]=e;return[`${s}${a}`,"object"==typeof t?K(t,s):t]}))}var X={name:"11wxlo4",styles:"font-family:Ginto"};const ee=e=>e?X:"";var se={name:"zl2874",styles:"font-family:Ginto;&:enabled{background-color:#884dff;&:hover{background-color:#7a43e6;border-color:#7a43e6;}}"};const ae=e=>e?se:"";var te={name:"11wxlo4",styles:"font-family:Ginto"};const ne=e=>e?te:"";var re={name:"e0dnmk",styles:"cursor:pointer"};const oe=e=>{let{userType:s,formData:a,newStyles:n,showLoginModal:r,closeModal:y,needsDataTransferConsent:N,updateSession:$,referralId:F}=e;const T=(0,k.useContext)(p.x),z=(0,j.m)(),{scrollToField:G}=(0,b.o)(),J=(0,k.useContext)(L.C),{href:X}=(0,l.useLocation)(),se=(0,I.getQueryParams)(),{0:te,1:oe}=(0,k.useState)(!1),{0:ie,1:ue}=(0,k.useState)(!1),{0:ce,1:de}=(0,k.useState)(!1),{0:me,1:pe}=(0,k.useState)(null),{0:he,1:_e}=(0,k.useState)(""),{0:ge,1:fe}=(0,k.useState)(!1),xe={title:(null==a?void 0:a.title)||"",firstName:(null==a?void 0:a.firstName)||"",lastName:(null==a?void 0:a.lastName)||"",emailAddress:(null==a?void 0:a.email)||"",password:(null==a?void 0:a.password)||"",privacyConsentChecked:!1,dataTransferConsentChecked:!1,referralId:F},ve=S().location.pathname.includes("bett");const je=_._B.WEB_ATTRIBUTION_SURVEY,be=z&&"test"===z[je];(0,h.Jr)(je);const we=(0,h._e)(je),ye=o()(["youtube","search","used_parent_student","recommended","tiktok","socialmedia","school_uses","dojo_ambassador","dojo_mentor"]);return(0,q.jsx)(k.Fragment,null,(0,q.jsx)(C.l1,{initialValues:{...xe,title:T.translate("titles.ms"),leaderRole:"school_leader"===s?"principal":"teacher"},validate:e=>function(e,s){var a;let{needsDataTransferConsent:t}=s;const n={};e.title||(n.title=!0),"other"!==e.title||e.titleCustom||(n.titleCustom=!0),e.firstName||(n.firstName=!0),e.lastName||(n.lastName=!0),(0,R.Ar)(e.password,e.emailAddress)||(n.password=!0);const r=null!==(a=e.emailAddress)&&void 0!==a?a:"";(!/^(?=\S{3,128}$)[^\s\\;,:]+@[^\s\\;,:\.]{1}[^\s\\;,:]*\.[^\s\\;,:0-9]+$/.test(r)||/@@/.test(r)||/\.\./.test(r)||/[`=<>\(\)\!\/\?#,\[\]\|"\\ğı]/.test(r))&&(n.emailAddress=!0);const o=r&&r.split("@")[0];return o&&!/[^\x00-\x7F]/.test(o)||(n.emailAddress=!0),t&&!e.privacyConsentChecked&&(n.privacyConsentChecked=!0),n}(e,{needsDataTransferConsent:N}),onSubmit:function(e,a){var t,n;let{setSubmitting:r}=a;const o=S().location;let l=o.origin;const i=l+"/api/teacher";(0,f.$s)({eventName:`web.${s}.user_signup.signup_form.create_account.tap`,eventValue:"domain_email_signup_overlay_variant",metadata:z}),(0,f.$s)("externalPage.teacher_or_school_leader.signup.click");const u=(o.pathname+o.search).substr(1),c=A().get("attribution"),d={stage:"select_school",from:"www",signupSource:"www"},m=S().location.pathname.includes("/conundrums"),p=null!==(t=e.leaderRole)&&void 0!==t?t:s,h={title:"other"===e.title?e.titleCustom:e.title,firstName:e.firstName,lastName:e.lastName,emailAddress:e.emailAddress,password:e.password,referralId:e.referralId,role:p,includeUserConfig:!0,signupPath:u,locale:null===(n=T.translationLocaleAsString)||void 0===n?void 0:n.call(T),timezone:le()};w.A.post(i,h,{withCredentials:!0}).then(function(a){var t,n,r;pe("success");const o=!(null===(t=a.data)||void 0===t||!t.type),i=o?null!==(n=null===(r=a.data[a.data.type])||void 0===r?void 0:r._id)&&void 0!==n?n:"":a.data._id;i&&(0,f.Lv)(i).then(function(){let e,a;o||(0,f.$s)({eventName:"web.signup.success",metadata:{current_site:"external",account_type:p,isBettBrazilUser:ve}});try{e=JSON.parse(g.I.getItem("init-referrer-data")||"{}"),a=JSON.parse(g.I.getItem("last-referrer-data")||"{}")}catch(l){e=null,a=null}const t=function(){const e=A().get("paid_attribution");if(!e)return null;const[s,a]=e.split("&").map(e=>e.split("=")[1]);return{paid_campaign:s,paid_source:a}}()||{},n=e?K(e,"init_"):null,r=a?K(a,"last_"):null;(0,f.$s)({eventName:`web.${s}.user_signup.signup_form.account_created`,eventValue:X,metadata:{...n,...r,...t,...se}})}),(0,f.Ys)("external_site.teacher_signup.success"),w.A.post(l+"/api/session",{password:e.password,login:e.emailAddress},{withCredentials:!0}).then(()=>{try{S().plausible("SignupSuccessful",{props:{user_type_test:s}})}catch(e){console.error("Error tracking signup success:",e)}if(o&&(0,f.$s)({eventName:"web.login.success",metadata:{current_site:"external",account_type:p,existingExternalAccount:!0}}),be&&(0,f.$s)({eventName:`web.${s}.user_signup.hdyhau`,eventValue:he,experiments:[je]}),we(),!J.getRedirectionStatus())return J.runSuccessAction(),$(),void y();if(m)return x.A.get("referrerId")&&(0,f.$s)({eventName:`web.${s}.user_signup.sign_up_from_shared_url`,eventValue:X,metadata:{...se,attribution:c}}),void S().location.reload();{Z(`web.${s}.user_signup.redirect_to_teach`);const e=`https://teach.classdojo.com/#/onboarding-v3/signup?${x.A.stringify(d)}`;S().location.href=e}}).catch(function(e){console.log(e)})}).catch(function(e){const a=(e=>{try{var s,a;return(null===(s=e.response.data)||void 0===s||null===(a=s.error)||void 0===a?void 0:a.detail)||""}catch(t){return""}})(e),t=(e=>{try{var s,a;return(null===(s=e.response.data)||void 0===s||null===(a=s.error)||void 0===a?void 0:a.code)||""}catch(t){return""}})(e);(0,f.$s)({eventName:"web.signup.failure",metadata:{current_site:"external",account_type:p}}),"Invalid password: Password cannot match email"===a?(Z(`web.${s}.user_signup.signup_form.password_matches_email`),(0,f.Ys)("external_site.teacher_signup.password_matches_email"),pe("password-matches-email-error")):"Weak password: Password must not contain common passwords."===a?(Z(`web.${s}.user_signup.signup_form.common_password`),(0,f.Ys)("external_site.teacher_signup.common_password"),pe("common-password-error")):a.includes("Email already exists")?(Z(`web.${s}.user_signup.signup_form.email_exists`),(0,f.Ys)("external_site.teacher_signup.email_exists"),pe("email-exists-error")):"Please provide a valid email address"===a?(Z(`web.${s}.user_signup.signup_form.invalid_email`),(0,f.Ys)("external_site.teacher_signup.invalid_email"),pe("email-error")):"ERR_BLOCKED_EMAIL_ADDRESS"===t?(Z(`web.${s}.user_signup.signup_form.suspended_email`),(0,f.Ys)("external_site.teacher_signup.suspended_email"),pe("suspended-email-error")):(Z(`web.${s}.user_signup.signup_form.unknown_error`),(0,f.Ys)("external_site.teacher_signup.unknown_error"),pe("api-error"))}).then(function(){r(!1)})}},e=>{let{values:a,errors:o,touched:l,handleChange:p,handleBlur:h,handleSubmit:_,isSubmitting:g,setFieldValue:x}=e;const j=()=>(0,q.jsx)(k.Fragment,null,(0,q.jsx)(Y.A,{email:a.emailAddress},e=>{var t;return(0,q.jsx)(k.Fragment,null,e&&e.full.toLowerCase()!=(null==a||null===(t=a.emailAddress)||void 0===t?void 0:t.toLowerCase())&&!te&&(0,q.jsx)(E.so,{justifyContent:"center"},(0,q.jsx)(O.n,{display:"inline-block",onClick:()=>x("emailAddress",e.full),css:re},T.translate("components.signup_teacher.suggest_email",{email:e.full}))),(0,q.jsx)(V.A,{rounded:!0,label:T.translate("pages.home.email"),"aria-describedby":"use-your-school-email",autoComplete:"email",name:"emailAddress",error:!!o.emailAddress&&l.emailAddress,"aria-invalid":!!o.emailAddress&&l.emailAddress,onChange:p,onBlur:e=>{oe(!1),Z("web."+s+".user_signup.signup_form.email_entry.fill"),h(e)},onFocus:()=>{oe(!0),G("emailAddress")},value:a.emailAddress,required:!0,newStyles:n}),(0,q.jsx)(P.e,null,o.emailAddress&&l.emailAddress?(0,q.jsx)(W,{key:"email-error"},(0,q.jsx)(O.d,{role:"alert","aria-live":"polite"},T.translateWithFallback({str:"components.signup_teacher.invalid_email",fallback:"Please enter a valid email"}))):(0,q.jsx)("div",{key:"email-error"})))}),(0,q.jsx)(P.e,null,te&&(0,q.jsx)(W,{key:"email-info"},(0,q.jsx)(O.n,{id:"use-your-school-email"},T.translate("components.signup_teacher.use_school_email")))));return(0,q.jsx)("form",{onSubmit:_,css:ee(n),className:"plausible-event-name=SignupFormSubmit"},g&&(0,q.jsx)(E.az,{width:"50px",height:"50px",mb:4,mx:"auto"},(0,q.jsx)("img",{alt:"Loading Mojo",src:B.A})),xe.emailAddress&&j(),(0,q.jsx)(M.A,{label:"Title",id:"title",marginBottom:15,name:"title",onChange:e=>{"other"===e.target.value?fe(!0):fe(!1),p(e)},onFocus:()=>G("title"),onBlur:h,value:a.title,newStyles:n,"aria-label":T.translate("pages.home.honorific_title")},(0,q.jsx)("option",null,T.translate("titles.ms")),(0,q.jsx)("option",null,T.translate("titles.miss")),(0,q.jsx)("option",null,T.translate("titles.mrs")),(0,q.jsx)("option",null,T.translate("titles.mr")),(0,q.jsx)("option",null,T.translate("titles.dr")),(0,q.jsx)("option",null,T.translate("titles.prof")),(0,q.jsx)("option",{value:"other"},T.translate("titles.other"))),ge&&(0,q.jsx)(V.A,{label:T.translate("pages.home.honorific_title"),rounded:!0,"aria-label":T.translate("pages.home.honorific_title"),name:"titleCustom",error:!!o.titleCustom&&l.titleCustom,"aria-invalid":!!o.titleCustom&&l.titleCustom,onChange:p,onBlur:h,onFocus:()=>G("titleCustom"),value:a.titleCustom,maxLength:20,required:!0,newStyles:n}),(0,q.jsx)(V.A,{rounded:!0,label:T.translate("pages.home.first_name"),autoComplete:"given-name",name:"firstName",error:!!o.firstName&&l.firstName,"aria-invalid":!!o.firstName&&l.firstName,onChange:p,onBlur:h,onFocus:()=>G("firstName"),value:a.firstName,required:!0,newStyles:n}),(0,q.jsx)(P.e,null,o.firstName&&l.firstName?(0,q.jsx)(W,{key:"firstName-error"},(0,q.jsx)(O.d,{role:"alert","aria-live":"polite"},(0,q.jsx)(m.A,{path:"pages.home.please_first_name",fallback:"Please enter a first name"}))):(0,q.jsx)("div",{key:"firstName-error"})),(0,q.jsx)(V.A,{rounded:!0,label:T.translate("pages.home.last_name"),autoComplete:"family-name",name:"lastName",error:!!o.lastName&&l.lastName,"aria-invalid":!!o.lastName&&l.lastName,onChange:e=>{Z("web."+s+".user_signup.signup_form.name_entry.fill"),p(e)},onBlur:h,onFocus:()=>G("lastName"),value:a.lastName,required:!0,newStyles:n}),(0,q.jsx)(P.e,null,o.lastName&&l.lastName?(0,q.jsx)(W,{key:"lastName-error"},(0,q.jsx)(O.d,{role:"alert","aria-live":"polite"},(0,q.jsx)(m.A,{path:"pages.home.please_last_name",fallback:"Please enter a last name"}))):(0,q.jsx)("div",{key:"lastName-errorr"})),!xe.emailAddress&&j(),(0,q.jsx)(V.A,{rounded:!0,label:T.translate("pages.home.password"),"aria-describedby":"password-validation-message",autoComplete:"off",type:"password",name:"password",error:!!o.password&&l.password,"aria-invalid":!!o.password&&l.password,onChange:p,onBlur:e=>{de(!0),h(e)},onFocus:()=>{pe(null),ue(!0),G("password")},value:a.password,required:!0,newStyles:n}),(0,q.jsx)("div",{id:"password-validation-message"},(0,q.jsx)(D.A,{password:a.password,pwFieldBlurred:ce,pwFieldTouched:ie})),["school_leader","teacher"].includes(s)&&(0,q.jsx)(M.A,{id:"role",marginBottom:15,name:"leaderRole",onChange:p,onBlur:h,onFocus:()=>G("leaderRole"),value:a.leaderRole,newStyles:n,label:T.translate("pages.home.role")},"teacher"===s&&(0,q.jsx)("option",{value:"teacher",selected:!0},T.translate("pages.home.teacher_signup")),(0,q.jsx)("option",{value:"principal"},T.translate("school_leader_roles.principal")),(0,q.jsx)("option",{value:"assistant_principal"},T.translate("school_leader_roles.assistant_principal")),(0,q.jsx)("option",{value:"school_leader"},T.translate("school_leader_roles.school_leader")),(0,q.jsx)("option",{value:"school_staff"},T.translateWithFallback({str:"school_leader_roles.school_staff",fallback:"School staff"}))),be&&(0,q.jsx)(M.A,{id:"hdyhau",marginBottom:15,name:"attributionQuestion","aria-label":T.translate("components.signup_teacher.hdyhau"),value:he,defaultValue:"",label:T.translate("components.signup_teacher.hdyhau"),onChange:e=>{(0,f.$s)({eventName:`web.${s}.user_signup.hdyhau.change`,eventValue:e.target.value,experiments:[je]}),_e(e.target.value)},onFocus:()=>G("attributionQuestion"),className:""===he?"placeholder":"",newStyles:n},(0,q.jsx)("option",{disabled:!0,value:""}),ye.map(e=>(0,q.jsx)("option",{value:e,key:e},T.translate(`components.signup_teacher.${e}`))),(0,q.jsx)("option",{value:"other"},T.translate("components.signup_teacher.other"))),N?(0,q.jsx)(k.Fragment,null,(0,q.jsx)(C.D0,{name:"privacyConsentChecked"},e=>{let{field:s}=e;return(0,q.jsx)(c.A,(0,t.A)({checked:!!s.value},s,{name:"privacyConsentChecked"}),(0,q.jsx)(d.zi,{css:ee(n)},T.translate("safe_harbor.agree")," ",(0,q.jsx)(Q,{target:"_blank",href:(0,v.Aj)("/privacy/"),css:ne(n)},T.translate("safe_harbor.policy"))," ",T.translate("safe_harbor.consent2")," ",(0,q.jsx)(Q,{target:"_blank",href:(0,v.Aj)("/terms/"),css:ne(n)},T.translate("safe_harbor.terms"),"."," ")))})):(0,q.jsx)(E.az,{textAlign:n?"center":"left",width:n?"100%":"90%",margin:"auto"},(0,q.jsx)(u.EY,{display:"inline",fontSize:16,mr:"5px",css:ee(n)},T.translate("safe_harbor.consent1")),(0,q.jsx)(U,{target:"_blank",href:(0,v.Aj)("/terms/"),display:"inline",css:ne(n)},T.translate("safe_harbor.terms")),(0,q.jsx)(u.EY,{display:"inline",fontSize:16,mx:"5px",css:ee(n)},T.translate("safe_harbor.consent2")),(0,q.jsx)(U,{target:"_blank",href:(0,v.Aj)("/privacy/"),display:"inline",css:ne(n)},T.translate("safe_harbor.policy")),"."),(0,q.jsx)(i.A,{big:!0,width:"100%",my:"15px",type:"submit",id:`${s}_signup_button`,disabled:g||Object.keys(o).length>0||0===Object.keys(l).length,css:ae(n),className:"plausible-event-name=SignupButtonClick",onFocus:()=>G(`${s}_signup_button`)},T.translate("pages.home.sign_up")),(0,q.jsx)(H,{apiAnswer:me,showLoginModal:r,userType:s}))}))};function le(){try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;if("UTC"===e.toLocaleUpperCase())return"Etc/UTC";if(/^[A-Za-z_]+\/[/A-Za-z0-9+\-_]+$/.test(e))return e}catch{}}s.A=e=>{let{userType:s,...a}=e;const n=(0,k.useContext)(T.Vs),r=(0,k.useContext)(F.h9);const[o]=(0,I.useQueryParamString)("transferData",""),l=o?"false"!==o:r.data.needsDataTransferConsent;(0,f.$s)({eventName:`web.${s}.user_signup.locale`,eventValue:(0,v.AQ)((0,v.aS)())}),(0,k.useEffect)(()=>{(0,f.$s)({eventName:"web.signup.screen_view",metadata:{current_site:"external",account_type:s}})},[s]);const[i]=(0,I.useQueryParamString)("r","");return(0,k.useEffect)(()=>{i?(A().expire("dojoReferalCode"),A().set("dojoReferalCode",i,{expires:1/0}),(0,f.$s)({eventName:`web.${s}.user_signup.signup_form.visited_with_invite_code`,eventValue:i})):Z(`web.${s}.user_signup.signup_form.visited`)},[]),(0,q.jsx)(oe,(0,t.A)({},a,{userType:s,showLoginModal:function(){"teacher"===s&&n.showModal(T.q3.TeacherLogin),"school_leader"===s&&n.showModal(T.q3.SchoolLeaderLogin)},closeModal:n.hideModal,needsDataTransferConsent:l,updateSession:r.services.getSession,referralId:i||void 0}))}}}]);
//# sourceMappingURL=e6465497-e6fdee5da127c77d7216.js.map